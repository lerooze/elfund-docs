ELFUND-DOCS
===========

Το **ELFUND-DOCS** περιγράφει τις απαιτούμενες προδιαγραφές ενός πληροφοριακού
συστήματος για την υποδοχή, επεξεργασία και κατάρτιση
στοιχείων επενδυτικών οργανισμών.

Στο παρακάτω διάγραμμα περιγράφεται συνοπτικά η δομή του συστήματος:

.. image:: images/elfund.png

Οι κύριες πηγές δεδομένων του ELFUND είναι οι εξής:

*  Απευθείας από εξουσιοδοτημένους υπαλλήλους με βάση τη δομή δεδομένων DBDat
*  Από τις ΜΠΣ των ΕΟ με βάση τη δομή δεδομένων IFDat
*  Από τις ΜΠΣ των ΕΟ με βάση άλλες δομές δεδομένων 
*  Από το ECB SDMX restful web service

Τα αρχεία που περιγράφουν τις δομές δεδομένων IFDAT και DBDAT θα τα βρείτε στις
:doc:`γρήγορες λήψεις <download>`.  Στο :xref:`ifdat` θα βρείτε τις οδηγίες προς
τις Μονάδες Παροχής Στοιχείων των ΕΟ.

Για τις πρώτες δύο πηγές τα εισερχόμενα αρχεία θα αποθηκεύονται με την ακόλουθη
ονομασία (push approach) με την ακόλουθη ονομασία
``F_{ID}_{DMN}_{PARTNER}_{USER}_{NAME}.{EXT}`` όπου το ID είναι ένας μοναδικός
αύξων αριθμός μάκρους δέκα χαρακτήρων με πρόθεμα το 0, NAME είναι η αρχική
ονομασία του εισερχόμενου αρχείου, DMN είναι η δομή δεδομένων του αρχείου,
PARTNER είναι ο κωδικός της ΜΠΣ, USER είναι ο κωδικός χρήστη του αναγγέλλοντα
όπως του έχει αποδοθεί από το σύστημα :xref:`iris` και EXT είναι είτε json ή
xlsx ανάλογα με το είδος του εισερχόμενου αρχείου.  Για παράδειγμα ένα
εισερχόμενο αρχείο δομής IFDAT με ονομασία **data_submission.xlsx** από τον
χρήστη **aloumiotis** με ID
5 μετονομάζεται σε ``F_0000000005_IFDAT_EGR010_aloumiotis_data_submission.xlsx``.

Για τις υπόλοιπες πηγές τα στοιχεία θα αντλούνται είτε από δικτυακούς φακέλους
είτε χρησιμοποιώντας RESTful APIS (pull approach). 

Η επεξεργασία των στοιχείων θα πρέπει να είναι εφικτή είτε σε σειριακή μορφή
(ξεχωριστή επεξεργασία και φόρτωση στη βάση για κάθε αρχείο) είτε σε παράλληλη
μορφή (σειριακή επεξεργασία αλλά ταυτόχρονη φόρτωση στη βάση άνω του ενός
αρχείου).  Προτεραιότητα θα δοθεί στην υλοποίηση της σειριακής επεξεργασίας. 

Σε περίπτωση που τα εισερχόμενα αρχεία είναι δομής IFDAT ή DBDAT δημιουργείται αρχείο
επικύρωσης ΑΠΑ ανά υποβαλλόμενο αρχείο αρχείο με τους ελέγχους που
περιγράφονται στην ενότητα :doc:`validate`.  Αν ένα αρχείο ικανοποιεί τους
ελέγχους επικύρωσης τότε θεωρείται έγκυρο.  

Όλες οι πηγές δεδομένων μετατρέπονται σε δομή DAT για να εισαχθούν στη βάση
δεδομένων.  Η δομή δεδομένων DAT περιλαμβάνει επιπρόσθετα σε κάθε πίνακα τις
διαστάσεις SRC_ORG, SRC_USR και SRC_TYP σε σχέση με τη δομή δεδομένων DBDAT.
Στο κεφάλαιο :doc:`backend` περιγράφονται οι ελάχιστες διαφοροποιήσεις που
πρέπει να έχουν οι πίνακες της βάσης δεδομένων σε σχέση με τους πίνακες της
δομής **DBDat**, οι κανόνες εισαγωγής στοιχείων δομής **DAT** στη βάση καθώς και
το API για την άντληση στοιχείων από τη βάση. 

Για κάθε πίνακα δομής DBDAT η μόνη μετατροπή που χρειάζεται για να γίνει
πίνακας DAT είναι να αντληθούν από το HEADER το SRC_TYP, SRC_USR και το SRC_ORG
χρησιμοποιώντας τις μεταβλητές SRC_TYP, USERNAME, PARTNER. 

Για κάθε πίνακα IFDAT για να μετατραπεί σε πίνακα DAT προστίθενται αρχικά οι
μεταβλητές SRC_ORG και SRC_USR με τις τιμές να αντλούνται από τις τιμές των
μεταβλητών PARTNER και USERNAME του πίνακα HEADER.  Προστίθεται επίσης η
μεταβλητή SRC_TYP με τιμή "SDR" εκτός και αν αναφέρεται διαφορετικά :doc:`στους
αναλυτικούς κανόνες μετατροπής του κάθε πίνακα IFDAT σε πίνακα DAT
<ifdat2dbdat>`. 

Στο κεφάλαιο :doc:`generic` περιγράφονται γενικές οδηγίες και κανόνες.

Στο κεφάλαιο :doc:`validation` παρουσιάζεται το ACK data model.

Στο κεφάλαιο :doc:`whatsnew` παρουσιάζονται λεπτομέρειες σχετικά με το τι
αλλάζει σε κάθε νέα έκδοση του **ELFUND-DOCS**.

Στο κεφάλαιο :doc:`dev` περιγράφεται ο τρόπος συνεισφοράς στην ανάπτυξη των
προδιαγραφών **ELFUND-DOCS**.


.. toctree::
   :maxdepth: 1

   download
   riad
   csdb
   backend
   generic
   validation
   whatsnew
   dev

.. toctree::
   :hidden:

   license
